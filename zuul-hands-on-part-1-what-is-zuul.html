<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Zuul Hands on - part 1 - What is Zuul ? - Software Factory</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="./zuul-hands-on-part-1-what-is-zuul.html">

        <meta name="author" content="Nicolas Hicher" />
        <meta name="keywords" content="zuul-hands-on-series" />
        <meta name="description" content="This article is the first in a series about learning Zuul by usage. This series will start with simple use cases then will cover more complex jobs configurations. In this first article, we will quickly introduce Zuul&#39;s components and give some details about how Zuul is integrated within Software Factory …" />

        <meta property="og:site_name" content="Software Factory" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Zuul Hands on - part 1 - What is Zuul ?"/>
        <meta property="og:url" content="./zuul-hands-on-part-1-what-is-zuul.html"/>
        <meta property="og:description" content="This article is the first in a series about learning Zuul by usage. This series will start with simple use cases then will cover more complex jobs configurations. In this first article, we will quickly introduce Zuul&#39;s components and give some details about how Zuul is integrated within Software Factory …"/>
        <meta property="article:published_time" content="2018-08-08" />
            <meta property="article:section" content="blog" />
            <meta property="article:tag" content="zuul-hands-on-series" />
            <meta property="article:author" content="Nicolas Hicher" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/pygments/solarizedlight.css" rel="stylesheet">
        <link href="./theme/css/html4css1.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>


        <link href="./blog.xml" type="application/atom+xml" rel="alternate"
              title="Software Factory blog ATOM Feed"/>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="./" class="navbar-brand">
<img class="img-responsive pull-left gap-right" src="./images/SoftwareFactory-logo.svg" width="20px"/> Software Factory            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="./pages/contact.html">
                             Contact
                          </a></li>
                        <li class="active">
                            <a href="./category/blog.html">Blog</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="./zuul-hands-on-part-1-what-is-zuul.html"
                       rel="bookmark"
                       title="Permalink to Zuul Hands on - part 1 - What is Zuul ?">
                        Zuul Hands on - part 1 - What is Zuul ?
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-08-08T00:00:00+00:00"> Wed 08 August 2018</time>
    </span>


            <span class="label label-default">By</span>
            <a href="./author/nicolas-hicher.html"><i class="fa fa-user"></i> Nicolas Hicher</a>



<span class="label label-default">Tags</span>
	<a href="./tag/zuul-hands-on-series.html">zuul-hands-on-series</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>This article is the first in a series about learning Zuul by usage. This series
will start with simple use cases then will cover more complex jobs
configurations.</p>
<p>In this first article, we will quickly introduce Zuul's components and give some
details about how Zuul is integrated within Software Factory.</p>
<p>You can deploy a Zuul sandbox by using Software Factory. To do so, please read
this <a class="reference external" href="http://www.softwarefactory-project.io/how-to-setup-a-software-factory-sandbox.html">article</a>,
that explains how to setup a SF sandbox. This article and upcoming ones are based
on a Software Factory deployment, so we highly recommend to deploy this sandbox
to successfully experiment with Zuul.</p>
<p>This article is part of the <a class="reference external" href="./tag/zuul-hands-on-series.html">Zuul hands-on series</a>.</p>
<div class="section" id="zuul-project">
<h2>Zuul project</h2>
<p><a class="reference external" href="https://docs.openstack.org/infra/zuul/">Zuul</a> is an application created by
OpenStack's Infra team to be the gating system for OpenStack projects. The main
role of Zuul is to gate all of OpenStack projects’ source code. Zuul ensures
changes are merged on their respective git repositories only if they pass
predefined tests jobs. Zuul jobs consist of a combination of Ansible playbooks and
roles.</p>
<p>You can see live instances of Zuul at the following URLs:</p>
<ul class="simple">
<li><a class="reference external" href="https://zuul.openstack.org">OpenStack CI</a></li>
<li><a class="reference external" href="https://softwarefactory-project.io/zuul/">Software Factory</a></li>
<li><a class="reference external" href="https://review.rdoproject.org/zuul/status.html">RDO CI</a></li>
</ul>
<p>The key features of Zuul are:</p>
<ul class="simple">
<li>Gating on git branches: Zuul guarantees that no merged patch will break the code (as covered by testing, of course).</li>
<li>Speculative testing: tests jobs are executed on the expected states of repositories at merging time.
This is particularly useful when several, potentially conflicting patches are landing roughly at the same time.</li>
<li>Scaling: Zuul relies on Nodepool to leverage a pool of test nodes. This can be controlled with quotas on spawning test nodes.</li>
<li>Pipelines: the lifecycle of Pull Requests/Gerrit changes is defined through pipelines.</li>
<li>Multi-repository: Zuul can gate projects spread across multiple repositories.
It is even possible to test changes depending on patches that aren't merged yet in other repositories,
as Zuul can prepare testing environments that respect code dependencies.</li>
<li>Parallel testing: Zuul can provision as many jobs as there are nodes available to run them.</li>
<li>In-repository job configuration: each project can define its pipelines and jobs configuration in a file called .zuul.yaml.</li>
<li>Pre-merge job loading: modifications to jobs definitions in the .zuul.yaml file
are loaded by Zuul and can be tested before being merged.</li>
<li>Multi-node job support: Zuul can run jobs on complex topologies, for example when testing clients and servers.</li>
<li>Ansible support: test jobs can be run outside of Zuul; and Zuul also comes with the ARA reporting tool to browse through playbooks outputs.</li>
</ul>
<p>All these features will be explained in more depth in following articles.</p>
</div>
<div class="section" id="zuul-s-components">
<h2>Zuul's components</h2>
<p>Zuul consists of multiple components that react to events coming from a Code Review
system. Here is a list of these components:</p>
<ul class="simple">
<li>The <strong>code review (CR) system</strong> hosts the changes to gate with Zuul. Zuul supports Gerrit (code reviews) and Github (Pull Requests).</li>
<li><strong>zuul-scheduler</strong> receives events from remote CR systems, and schedules the execution of jobs
according to a project's job configuration; then reports job results to the CR system.</li>
<li><strong>zuul-executor</strong> uses Ansible to execute jobs remotely on test nodes provided by Nodepool.</li>
<li><strong>Nodepool</strong> launches, provisions and ultimately destroy nodes needed to run tests jobs (OpenStack instances
or OCI containers can be used in a Software Factory deployment).</li>
<li><strong>zuul-web</strong> is Zuul's Web frontend and provides a REST API.</li>
</ul>
<div class="figure">
<img alt="None" src="images/simple_zuul_arch.png" style="width: 80%;" />
</div>
<p>You can find a full description of all the components in the <a class="reference external" href="https://docs.openstack.org/infra/zuul/admin/components.html">documentation</a>.</p>
</div>
<div class="section" id="zuul-in-software-factory">
<h2>Zuul in Software Factory</h2>
<p>Zuul's components are configured using the <em>config</em> repository, the configuration is
in the <em>zuul.d</em> directory within that repository. You can clone this repository on your workstation, it will be used in
the next articles to configure Zuul:</p>
<div class="highlight"><pre><span></span>git clone -c http.sslVerify<span class="o">=</span><span class="nb">false</span> https://sftests.com/r/config
</pre></div>
<p>Assuming Software Factory has been deployed on a single server (all-in-one architecture),
the main configuration files for Zuul are located in <em>/etc/zuul</em>:</p>
<ul class="simple">
<li>zuul.conf is the main configuration file for zuul.</li>
<li>main.yaml contains the tenants, remote systems and repositories.</li>
</ul>
<p>These files are managed with the <em>sfconfig</em> utility script, and should not be
edited manually!</p>
<p>The log files for zuul components (scheduler, executor and web) are located in
<em>/var/log/zuul</em>.</p>
<p>On your SF deployment, you can access Zuul-web at <a class="reference external" href="https://sftests.com/zuul/t/local/status.html">https://sftests.com/zuul/t/local/status.html</a> and
the documentation at <a class="reference external" href="https://sftests.com/docs/">https://sftests.com/docs/</a>.</p>
<div class="figure">
<img alt="None" src="images/zuul_web.png" style="width: 80%;" />
</div>
<p>Stay tuned for the next article, where we will create our first project in
Software Factory, and gate a first change via Gerrit and Zuul.</p>
</div>

            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Recent Posts -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
  <ul class="list-group" id="recentposts">
    <li class="list-group-item"><a href="./sprint-2024-aug-09-to-2024-aug-28-summary.html">Sprint 2024 Aug 09 to 2024 Aug 28 summary</a></li>
    <li class="list-group-item"><a href="./sprint-2024-jul-19-to-2024-aug-07-summary.html">Sprint 2024 Jul 19 to 2024 Aug 07 summary</a></li>
    <li class="list-group-item"><a href="./sprint-2024-jun-28-to-2024-jul-17-summary.html">Sprint 2024 Jun 28 to 2024 Jul 17 summary</a></li>
    <li class="list-group-item"><a href="./sprint-2024-jun-07-to-2024-jun-26-summary.html">Sprint 2024 Jun 07 to 2024 Jun 26 summary</a></li>
    <li class="list-group-item"><a href="./sprint-2024-may-16-to-2024-jun-05-summary.html">Sprint 2024 May 16 to 2024 Jun 05 summary</a></li>
  </ul>
</li>
<!-- End Sidebar/Recent Posts -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2024 Red Hat
           &middot; Powered by <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>
           &middot; This work is licensed under a
               <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
                 Creative Commons Attribution 4.0 International License
               </a>.
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="./theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>




</body>
</html>